{% extends "base.html" %}
{% load socialaccount %}
{% load static %}
{% load i18n %}

{% block title %}登录 - {{ block.super }}{% endblock %}

{% block extra_css %}
<style>
    .login-container {
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }
    .login-form {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px;
        overflow: hidden;
    }
    .login-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        text-align: center;
        padding: 30px 20px;
    }
    .login-body {
        padding: 40px 30px;
    }
    .btn-login {
        width: 100%;
        margin-top: 10px;
    }
    .social-login {
        text-align: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e1e5eb;
    }
    .social-btn {
        display: inline-block;
        margin: 5px;
        padding: 10px 16px;
        border-radius: 20px;
        color: white;
        text-decoration: none;
    }
    .github { background: #333; }
    .google { background: #4285f4; }
    .weibo { background: #e6162d; }
</style>
{% endblock %}

{% block content %}
<div class="login-container">
    <div class="login-form">
        <div class="login-header">
            <h3>欢迎回来</h3>
            <p>登录到您的账户</p>
        </div>

        <div class="login-body">
            <form method="post" action="{% url 'account_login' %}">
                {% csrf_token %}
                {{ form.non_field_errors }}

                <div class="mb-3">
                    <input type="text" name="login" class="form-control"
                           placeholder="用户名或邮箱" required>
                </div>

                <div class="mb-3">
                    <input type="password" name="password" class="form-control"
                           placeholder="密码" required>
                </div>

                <button type="submit" class="btn btn-primary btn-login">登录</button>
            </form>

            <div class="text-center mt-3">
                <a href="{% url 'account_reset_password' %}">忘记密码？</a>
            </div>

            {% get_providers as socialaccount_providers %}
            {% if socialaccount_providers %}
            <div class="social-login">
                <p>或使用第三方登录</p>

                {% for provider in socialaccount_providers %}
                    {% if provider.id == "github" %}
                        <a class="social-btn github"
                           href="{% provider_login_url provider.id %}">
                           GitHub 登录
                        </a>
                    {% elif provider.id == "google" %}
                        <a class="social-btn google"
                           href="{% provider_login_url provider.id %}">
                           Google 登录
                        </a>
                    {% elif provider.id == "weibo" %}
                        <a class="social-btn weibo"
                           href="{% provider_login_url provider.id %}">
                           微博登录
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

            <div class="text-center mt-4">
                还没有账号？
                <a href="{% url 'account_signup' %}">立即注册</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
